schema: '2.0'
stages:
  get_ingest_data:
    cmd: python src/stage_01_get_ingest_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: cddc48f9e0657edf6758b5c6fc03e9c7
      size: 630
    - path: src/stage_01_get_ingest_data.py
      md5: d1079fba170a7c747947f07644852c77
      size: 2601
    - path: src/utils/common.py
      md5: 4ab9a2963b57eb6e79ee805f6809e61c
      size: 1459
    - path: src/utils/db_mgmt.py
      md5: 198e655bc0aeb245511e3a356b76dd4b
      size: 1538
    outs:
    - path: data/complaints.db
      md5: ebbde296f9889e66ebd1100257ea3538
      size: 1170857984
  prepare_data:
    cmd: python src/stage_02_prepare.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: cddc48f9e0657edf6758b5c6fc03e9c7
      size: 630
    - path: data/complaints.db
      md5: ebbde296f9889e66ebd1100257ea3538
      size: 1170857984
    - path: src/stage_02_prepare.py
      md5: caf7c37d485ee906d6a9229db112a4c2
      size: 3397
    - path: src/utils/common.py
      md5: 4ab9a2963b57eb6e79ee805f6809e61c
      size: 1459
    - path: src/utils/db_mgmt.py
      md5: 198e655bc0aeb245511e3a356b76dd4b
      size: 1538
    outs:
    - path: artifacts/prepared/prepared.pkl
      md5: 72ce333c23bb51cafd0aeec83f4e70e1
      size: 10747066
  featurize_data:
    cmd: python src/stage_03_featurize.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/prepared/prepared.pkl
      md5: 72ce333c23bb51cafd0aeec83f4e70e1
      size: 10747066
    - path: configs/config.yaml
      md5: cddc48f9e0657edf6758b5c6fc03e9c7
      size: 630
    - path: src/stage_03_featurize.py
      md5: 78a8a0b3c63125bf2406db237101c940
      size: 3246
    - path: src/utils/common.py
      md5: 4ab9a2963b57eb6e79ee805f6809e61c
      size: 1459
    - path: src/utils/featurize.py
      md5: c9bc63ee9b2660b2d87dba1820ef6fe3
      size: 452
    params:
      params.yaml:
        featurize.max_features: 3000
        featurize.ngrams: 3
    outs:
    - path: artifacts/featurized/test/X_test.npy
      md5: a36243d95133205fb5f57d8c9c7c39b8
      size: 39864128
    - path: artifacts/featurized/test/y_test.npy
      md5: 63b50b78acdb3018aae0df1d480c2d80
      size: 6772
    - path: artifacts/featurized/train/X_train.npy
      md5: 12c97bd47ebf6944e1b8670130449ebe
      size: 159456128
    - path: artifacts/featurized/train/y_train.npy
      md5: ba0eed22184b2612bd8064d2f8e4edcc
      size: 26704
  train:
    cmd: python src/stage_04_train.py --config=configs/config.yaml
    deps:
    - path: artifacts/featurized/train/X_train.npy
      md5: 12c97bd47ebf6944e1b8670130449ebe
      size: 159456128
    - path: artifacts/featurized/train/y_train.npy
      md5: ba0eed22184b2612bd8064d2f8e4edcc
      size: 26704
    - path: configs/config.yaml
      md5: cddc48f9e0657edf6758b5c6fc03e9c7
      size: 630
    - path: src/stage_04_train.py
      md5: f6e14d76e9ce77ad100c0eaa081f2c19
      size: 1734
    - path: src/utils/common.py
      md5: 4ab9a2963b57eb6e79ee805f6809e61c
      size: 1459
    outs:
    - path: artifacts/model/model.pkl
      md5: 7716aa5065bd23670f768a1ca3abd8f6
      size: 128046470
  evaluate:
    cmd: python src/stage_05_evaluate.py --config=configs/config.yaml
    deps:
    - path: artifacts/featurized/test/X_test.npy
      md5: a36243d95133205fb5f57d8c9c7c39b8
      size: 39864128
    - path: artifacts/featurized/test/y_test.npy
      md5: 63b50b78acdb3018aae0df1d480c2d80
      size: 6772
    - path: artifacts/model/model.pkl
      md5: 7716aa5065bd23670f768a1ca3abd8f6
      size: 128046470
    - path: configs/config.yaml
      md5: cddc48f9e0657edf6758b5c6fc03e9c7
      size: 630
    - path: src/stage_05_evaluate.py
      md5: 6da1d8d6cae29d80c49e92f49e15ca92
      size: 2034
    - path: src/utils/common.py
      md5: 4ab9a2963b57eb6e79ee805f6809e61c
      size: 1459
    outs:
    - path: scores.json
      md5: 99dd42e2cb9f0de40b8d5d698ec7552c
      size: 40
